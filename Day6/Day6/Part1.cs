using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Day6
{
    internal class Part1
    {

        public static void ejecutar()
        {
            string puzzle = "....................................#............##........#..#.#..#.........#.............#..............#.......................\r\n..................##.........#....................##.....#.......#.......................................#..........#.............\r\n.......#...........#.........................................................................................#.#.#................\r\n.#..........#...............................#....................................#...#.....#...#.#....................#....#......\r\n..........#..........................................#............#.........................#..#......#....#..#..........#........\r\n..........................................................................#..........................................#.........#..\r\n.....#....#...........................#......#..........#........................#..........#.............#...........#..........#\r\n................#.......................#...........#.............................#.....#..#..................................#...\r\n........................................................................#..#.......................................#..............\r\n........#......................#.....#.......#.............#....#.........#....#........................#.............#...........\r\n.............#....#.......#........#..#.......##................#.......................................#.........................\r\n......#..............#.#...#...............#.........................#.....#............#..#.........#...............#............\r\n..................#...#..............................................#................#.......#................#..................\r\n....#...#.............#........................#....................................#......#................#......#..............\r\n..........................................................................................#...#.........##........................\r\n.............#.#...............#.....#.#......#.............................#.......................................#.....#.......\r\n.................................................#................................................................#...............\r\n........#.#......................#......#........#.......................................................#........................\r\n....#........#......#..................................................................................#............#.............\r\n...........#.........#.......#...............#........................#........................................................#.#\r\n........................##..................#........................#..........................................#.............#...\r\n..........#........#........#.........#..................#.....#..............................#..#..............#.................\r\n#..............................................................#..#............................#..........#.......................\r\n.................................................................#...............#...#.#.........#.#.................#...........#\r\n.....................................#.....................#.....................#........#....#....#.............................\r\n#..#................#.....#....................................##............#...............#...#..........#.....................\r\n.................#.....#.....................#................#...........#...................................................#...\r\n..................................#........#.................#....#..................#.......................................#....\r\n..#....#............................#................................................##.........................................#.\r\n...............#......................................................#......##...................................................\r\n.........................#..................................#................##.#..#.#.................#.......#..................\r\n.................#......................................#...#.....................................................................\r\n.........#..........................................................................................#.......#.....................\r\n....##..#.........#..............#..#............#............#...................................#...............................\r\n......#.......................................#................................................................#..................\r\n....#..................#............................#................................................................#............\r\n...............................##.#..............#....#............#.........................................#.....#..............\r\n........#........#....#.................................................................#.....#...................#...............\r\n#...........#..#.........................................#..................................................#..##.......#.....#..#\r\n................#......#...........##..........................................................#....#.............................\r\n..........#..........#.............................................................#..............#.................#..........#..\r\n#.................#....................................................................................#..#..............#........\r\n.....#..............#.........................#.....#...........#......................#..........................................\r\n.....##.....................#...............................................................#.....................................\r\n...................#.................................................................................#.....................#..#...\r\n...............................................^......................#...........................#...............................\r\n.......#...............#.........#.........#......#.......................................................................#.......\r\n........#.........#..#..##.................................#.....#..............#...........#..#........#.........................\r\n..............................................................................#......#.#...............#..#..#.....#....#.........\r\n............#...#.......##............#....#...........................................................................#..........\r\n..................................##........#.....##.......#......................................................................\r\n.......................#...........................................#..................................#...#.........#.............\r\n............#......................................................#....#..........#...................#........................#.\r\n....................................................#......................#..........................#....#......................\r\n..................#.##....................................#..................................#.................#....#...#.........\r\n........#.....................................................................................#...#...............................\r\n....................................................#..........................................#........#..#.#.................#..\r\n....#...........#..#......#.........................#.....................#............................#.....#.#..............#...\r\n.............................#.......#..........#..................................................................#....#.....#...\r\n.....#.#................#...................#...............................................#.....................................\r\n....#........................................#......#.............................#...............................................\r\n.......#..........#........................#.....................................#..............#......#...##.....................\r\n.....#..#.............................##........................................................#.....#..............#.#..........\r\n...........................................#......#......................................#..............#.........................\r\n...................#.........#....#................#.....#.........#....................#............#..#........#...............#\r\n.....#.....................#......................................................................#...............................\r\n...............#.......................................#...#.................#..............#.....................................\r\n.........................#........................................................#...............................................\r\n..................................#..........................................#...........#.....................#..................\r\n.......................#.#............#.........................................#.................................................\r\n..........................#...................#......................#......................................#.....................\r\n.........#.........................#..............................................................#...............................\r\n..#..............................#...............#..................................###..........................................#\r\n.............................................#...............#.....#........................................................#..#..\r\n................#..........................#.......................................#........................................##.#..\r\n......##........#.....................................#............#..................#...............................#...........\r\n..#..................#......................................#....#.......................#................................#.......\r\n........................#...............#....#...#..........................................................................#.....\r\n.............#.#..........#...#....#.................##...........................................................................\r\n......#....#.......................................................................#.....................................#..#.....\r\n.............#.......#............#...#..........#...............#..................................................#..........#..\r\n..........................#...........................................................#.............#.............................\r\n#......................................#........#......#..........................................................................\r\n................#..........................................................#......................................................\r\n..................#................................................................#..........................#..........#.......#\r\n.......#.....#............##..............................................................#....................#.....#......#.....\r\n...........................................#..........#.#............................................#............................\r\n.......#.......................#..........................................................#.......................................\r\n.................#........................#.........#...#............................................................#............\r\n................................................#...................#.........#...........#...........................#...........\r\n..#..............#......#..............................##............#..................#.......#.................................\r\n.#.#.........................................#......##.....##........#.............#..#..................##....#.#...#............\r\n..#.....................#.......#....#...............#...............#...................................................#........\r\n.#...#...............#..................................................................#..........#....#.................#.#.....\r\n.#...................#...................................................................#.............#.......................#..\r\n.....................................#.....#..#...........#...........#..........#....................................#...........\r\n.................................................................................#..#.............##....#...#............#........\r\n......................#....#........#......#...................#.............................................#....................\r\n.......................................#..........................#............................#.#..........................#.....\r\n.#........................##....................................#.......#...........................#..#.......................#..\r\n.........#.........#................................................................#.................#........#..................\r\n..............#.......#.....#....................#........##.............#....#...............#.............#...........#...#.....\r\n.................................................................#..#........#...#...#.........#..................................\r\n................#......##..........#..........#.........#....#............................................#.#.............#.......\r\n...#...................................................................#.......................................#..................\r\n.......#..................#............#.....#................#..#....##.......#...............#..................................\r\n............#............##....#...................#..........................#......................................#...#...#....\r\n......#.....#..........##...............#......#...............................#......#...........................................\r\n.................#.......#.......................................................#............#........#...#.......#...........#..\r\n......................##........#...................#.....#....................#...#....#........................#................\r\n.................#.....#.......#...........#.......#....................##....................................................#.#.\r\n......#....................................#.........................#..................................#................#.#..#...\r\n..............#...........................................................................................................#.......\r\n#.#......#.................................................................................#...........#...#......................\r\n...........................................#.#........#....#............#.....................#...................................\r\n...#.............#.....................................................................................................#..........\r\n..............#..........#............#...#..............#........................................##........#.....#.......#.......\r\n..................##........#.............................................#.........................................###...........\r\n..........#......................#............................................................................#....#..............\r\n.............#........#.............#.#...............#.....#..........#.....#....#...#...........#....#..........................\r\n........#...#.......#........................#.............#..........#........#.......................#..........................\r\n..................................................................#...............#......#...#.......#............................\r\n.............#..........#...................##.............#.........#..................#.........................................\r\n.#.....#..#...#...............#.#.............#...........#.......................................................................\r\n..............#..#.........................#..............#..#..............#.......................#.#...........................\r\n............#.......................#....#................#..........#.......................#.....................#..............\r\n#.................#............................#...##....#.....#.....................................................#............\r\n.............................#........................#..................................................#....#...................\r\n.##...........................................#.....#....#....#.......................#...#.....#...#............#................\r\n........#.............#.........#..............#........................#.....................#...#...............................";
            string puzzleTest = ".................#..................#............##........#..#.#..#.........#.............#..............#.......................\r\n" +
                            ".................^##.........#....................##.....#.......#.......................................#..........#.............\r\n" +
                            ".................#.#.........................................................................................#.#.#................\r\n.#..........#...............................#....................................#...#.....#...#.#....................#....#......\r\n..........#..........................................#............#.........................#..#......#....#..#..........#........\r\n..........................................................................#..........................................#.........#..\r\n.....#....#...........................#......#..........#........................#..........#.............#...........#..........#\r\n................#.......................#...........#.............................#.....#..#..................................#...\r\n........................................................................#..#.......................................#..............\r\n........#......................#.....#.......#.............#....#.........#....#........................#.............#...........\r\n.............#....#.......#........#..#.......##................#.......................................#.........................\r\n......#..............#.#...#...............#.........................#.....#............#..#.........#...............#............\r\n..................#...#..............................................#................#.......#................#..................\r\n....#...#.............#........................#....................................#......#................#......#..............\r\n..........................................................................................#...#.........##........................\r\n.............#.#...............#.....#.#......#.............................#.......................................#.....#.......\r\n.................................................#................................................................#...............\r\n........#.#......................#......#........#.......................................................#........................\r\n....#........#......#..................................................................................#............#.............\r\n...........#.........#.......#...............#........................#........................................................#.#\r\n........................##..................#........................#..........................................#.............#...\r\n..........#........#........#.........#..................#.....#..............................#..#..............#.................\r\n#..............................................................#..#............................#..........#.......................\r\n.................................................................#...............#...#.#.........#.#.................#...........#\r\n.....................................#.....................#.....................#........#....#....#.............................\r\n#..#................#.....#....................................##............#...............#...#..........#.....................\r\n.................#.....#.....................#................#...........#...................................................#...\r\n..................................#........#.................#....#..................#.......................................#....\r\n..#....#............................#................................................##.........................................#.\r\n...............#......................................................#......##...................................................\r\n.........................#..................................#................##.#..#.#.................#.......#..................\r\n.................#......................................#...#.....................................................................\r\n.........#..........................................................................................#.......#.....................\r\n....##..#.........#..............#..#............#............#...................................#...............................\r\n......#.......................................#................................................................#..................\r\n....#..................#............................#................................................................#............\r\n...............................##.#..............#....#............#.........................................#.....#..............\r\n........#........#....#.................................................................#.....#...................#...............\r\n#...........#..#.........................................#..................................................#..##.......#.....#..#\r\n................#......#...........##..........................................................#....#.............................\r\n..........#..........#.............................................................#..............#.................#..........#..\r\n#.................#....................................................................................#..#..............#........\r\n.....#..............#.........................#.....#...........#......................#..........................................\r\n.....##.....................#...............................................................#.....................................\r\n...................#.................................................................................#.....................#..#...\r\n......................................................................#...........................#...............................\r\n.......#...............#.........#.........#......#.......................................................................#.......\r\n........#.........#..#..##.................................#.....#..............#...........#..#........#.........................\r\n..............................................................................#......#.#...............#..#..#.....#....#.........\r\n............#...#.......##............#....#...........................................................................#..........\r\n..................................##........#.....##.......#......................................................................\r\n.......................#...........................................#..................................#...#.........#.............\r\n............#......................................................#....#..........#...................#........................#.\r\n....................................................#......................#..........................#....#......................\r\n..................#.##....................................#..................................#.................#....#...#.........\r\n........#.....................................................................................#...#...............................\r\n....................................................#..........................................#........#..#.#.................#..\r\n....#...........#..#......#.........................#.....................#............................#.....#.#..............#...\r\n.............................#.......#..........#..................................................................#....#.....#...\r\n.....#.#................#...................#...............................................#.....................................\r\n....#........................................#......#.............................#...............................................\r\n.......#..........#........................#.....................................#..............#......#...##.....................\r\n.....#..#.............................##........................................................#.....#..............#.#..........\r\n...........................................#......#......................................#..............#.........................\r\n...................#.........#....#................#.....#.........#....................#............#..#........#...............#\r\n.....#.....................#......................................................................#...............................\r\n...............#.......................................#...#.................#..............#.....................................\r\n.........................#........................................................#...............................................\r\n..................................#..........................................#...........#.....................#..................\r\n.......................#.#............#.........................................#.................................................\r\n..........................#...................#......................#......................................#.....................\r\n.........#.........................#..............................................................#...............................\r\n..#..............................#...............#..................................###..........................................#\r\n.............................................#...............#.....#........................................................#..#..\r\n................#..........................#.......................................#........................................##.#..\r\n......##........#.....................................#............#..................#...............................#...........\r\n..#..................#......................................#....#.......................#................................#.......\r\n........................#...............#....#...#..........................................................................#.....\r\n.............#.#..........#...#....#.................##...........................................................................\r\n......#....#.......................................................................#.....................................#..#.....\r\n.............#.......#............#...#..........#...............#..................................................#..........#..\r\n..........................#...........................................................#.............#.............................\r\n#......................................#........#......#..........................................................................\r\n................#..........................................................#......................................................\r\n..................#................................................................#..........................#..........#.......#\r\n.......#.....#............##..............................................................#....................#.....#......#.....\r\n...........................................#..........#.#............................................#............................\r\n.......#.......................#..........................................................#.......................................\r\n.................#........................#.........#...#............................................................#............\r\n................................................#...................#.........#...........#...........................#...........\r\n..#..............#......#..............................##............#..................#.......#.................................\r\n.#.#.........................................#......##.....##........#.............#..#..................##....#.#...#............\r\n..#.....................#.......#....#...............#...............#...................................................#........\r\n.#...#...............#..................................................................#..........#....#.................#.#.....\r\n.#...................#...................................................................#.............#.......................#..\r\n.....................................#.....#..#...........#...........#..........#....................................#...........\r\n.................................................................................#..#.............##....#...#............#........\r\n......................#....#........#......#...................#.............................................#....................\r\n.......................................#..........................#............................#.#..........................#.....\r\n.#........................##....................................#.......#...........................#..#.......................#..\r\n.........#.........#................................................................#.................#........#..................\r\n..............#.......#.....#....................#........##.............#....#...............#.............#...........#...#.....\r\n.................................................................#..#........#...#...#.........#..................................\r\n................#......##..........#..........#.........#....#............................................#.#.............#.......\r\n...#...................................................................#.......................................#..................\r\n.......#..................#............#.....#................#..#....##.......#...............#..................................\r\n............#............##....#...................#..........................#......................................#...#...#....\r\n......#.....#..........##...............#......#...............................#......#...........................................\r\n.................#.......#.......................................................#............#........#...#.......#...........#..\r\n......................##........#...................#.....#....................#...#....#........................#................\r\n.................#.....#.......#...........#.......#....................##....................................................#.#.\r\n......#....................................#.........................#..................................#................#.#..#...\r\n..............#...........................................................................................................#.......\r\n#.#......#.................................................................................#...........#...#......................\r\n...........................................#.#........#....#............#.....................#...................................\r\n...#.............#.....................................................................................................#..........\r\n..............#..........#............#...#..............#........................................##........#.....#.......#.......\r\n..................##........#.............................................#.........................................###...........\r\n..........#......................#............................................................................#....#..............\r\n.............#........#.............#.#...............#.....#..........#.....#....#...#...........#....#..........................\r\n........#...#.......#........................#.............#..........#........#.......................#..........................\r\n..................................................................#...............#......#...#.......#............................\r\n.............#..........#...................##.............#.........#..................#.........................................\r\n.#.....#..#...#...............#.#.............#...........#.......................................................................\r\n..............#..#.........................#..............#..#..............#.......................#.#...........................\r\n............#.......................#....#................#..........#.......................#.....................#..............\r\n#.................#............................#...##....#.....#.....................................................#............\r\n.............................#........................#..................................................#....#...................\r\n.##...........................................#.....#....#....#.......................#...#.....#...#............#................\r\n........#.............#.........#..............#........................#.....................#...#...............................";
            //string puzzle = "....#.....\r\n.........#\r\n..........\r\n..#.......\r\n.......#..\r\n..........\r\n.#..^.....\r\n........#.\r\n#.........\r\n......#...";

            //Guarda
            //Posiciones que ha ocupado en formato "y,x"
            List<string> ocuppedPosition = new List<string>();
            //Posicion actual
            int[] currentPosition = new int[] { 0, 0 };
            int[] currentDirection = new int[] { -1, 0 };
            //Orden de las direcciones (arriba, derecha, abajo, izquierda)
            int[][] directionsSort = new int[][] { new int[] { -1, 0 }, new int[] { 0, 1 }, new int[] { 1, 0 }, new int[] { 0, -1 } };

            //Puzzle
            List<List<string>> puzzleMap = new List<List<string>>();
            foreach (string line in puzzle.Split("\r\n"))
            {
                puzzleMap.Add(line.Select(x => x.ToString()).ToList());
            }

            //Localizar la posicion inicial
            for (int y = 0; y < puzzleMap.Count; y++)
            {
                for (int x = 0; x < puzzleMap[y].Count; x++)
                {
                    if (puzzleMap[y][x] == "^")
                    {
                        currentPosition = new int[] { y, x };
                        break;
                    }
                }
            }

            Boolean isEnd = false;

            while (!isEnd)
            {
                try
                {
                    //Comprobar si la dirección es válida
                    Boolean canMove = false;
                    while (!canMove)
                    {
                        int[] nextPosition = new int[] { currentPosition[0] + currentDirection[0], currentPosition[1] + currentDirection[1] };
                        //Comprobar
                        if (puzzleMap[nextPosition[0]][nextPosition[1]] == "#")
                        {
                            //Girar a la derecha
                            currentDirection = directionsSort[(Array.IndexOf(directionsSort, currentDirection) + 1) % 4];
                        }
                        else
                        {
                            canMove = true;
                        }
                    }
                    //Guardar ubicación
                    //Compraobar si la ubicación ya fue guardad
                    if (!ocuppedPosition.Contains($"{currentPosition[0]},{currentPosition[1]}"))
                    {
                        ocuppedPosition.Add($"{currentPosition[0]},{currentPosition[1]}");
                    }

                    //Mover
                    currentPosition[0] += currentDirection[0];
                    currentPosition[1] += currentDirection[1];
                }//Controlar si se sale del mapa
                catch (Exception e)
                {
                    isEnd = true;
                }
            }

            Console.WriteLine($"La guarda se movió por {ocuppedPosition.Count + 1} posiciones");
        }
    }
}
