using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Day13
{
    internal class Part2
    {
        public static void Run()
        {
            //string puzzle = "Button A: X+94, Y+34\r\nButton B: X+22, Y+67\r\nPrize: X=8400, Y=5400\r\n\r\nButton A: X+26, Y+66\r\nButton B: X+67, Y+21\r\nPrize: X=12748, Y=12176\r\n\r\nButton A: X+17, Y+86\r\nButton B: X+84, Y+37\r\nPrize: X=7870, Y=6450\r\n\r\nButton A: X+69, Y+23\r\nButton B: X+27, Y+71\r\nPrize: X=18641, Y=10279";
            string puzzle = "Button A: X+77, Y+52\r\nButton B: X+14, Y+32\r\nPrize: X=5233, Y=14652\r\n\r\nButton A: X+98, Y+61\r\nButton B: X+23, Y+50\r\nPrize: X=10248, Y=7378\r\n\r\nButton A: X+54, Y+20\r\nButton B: X+28, Y+65\r\nPrize: X=13610, Y=15850\r\n\r\nButton A: X+42, Y+17\r\nButton B: X+50, Y+72\r\nPrize: X=3204, Y=7871\r\n\r\nButton A: X+84, Y+30\r\nButton B: X+27, Y+62\r\nPrize: X=9093, Y=8012\r\n\r\nButton A: X+18, Y+39\r\nButton B: X+33, Y+15\r\nPrize: X=7340, Y=7667\r\n\r\nButton A: X+24, Y+51\r\nButton B: X+59, Y+21\r\nPrize: X=4064, Y=18836\r\n\r\nButton A: X+45, Y+18\r\nButton B: X+12, Y+37\r\nPrize: X=6152, Y=15640\r\n\r\nButton A: X+41, Y+76\r\nButton B: X+72, Y+39\r\nPrize: X=5294, Y=7924\r\n\r\nButton A: X+83, Y+27\r\nButton B: X+17, Y+47\r\nPrize: X=6000, Y=4440\r\n\r\nButton A: X+17, Y+97\r\nButton B: X+92, Y+45\r\nPrize: X=6704, Y=7536\r\n\r\nButton A: X+19, Y+61\r\nButton B: X+91, Y+45\r\nPrize: X=5398, Y=5714\r\n\r\nButton A: X+90, Y+41\r\nButton B: X+26, Y+74\r\nPrize: X=1838, Y=3510\r\n\r\nButton A: X+51, Y+33\r\nButton B: X+15, Y+69\r\nPrize: X=738, Y=1782\r\n\r\nButton A: X+23, Y+87\r\nButton B: X+83, Y+50\r\nPrize: X=6420, Y=8183\r\n\r\nButton A: X+47, Y+25\r\nButton B: X+39, Y+67\r\nPrize: X=17627, Y=2303\r\n\r\nButton A: X+27, Y+21\r\nButton B: X+14, Y+98\r\nPrize: X=3084, Y=10500\r\n\r\nButton A: X+24, Y+39\r\nButton B: X+46, Y+16\r\nPrize: X=7226, Y=251\r\n\r\nButton A: X+70, Y+80\r\nButton B: X+96, Y+15\r\nPrize: X=11042, Y=5800\r\n\r\nButton A: X+11, Y+85\r\nButton B: X+54, Y+14\r\nPrize: X=446, Y=1430\r\n\r\nButton A: X+43, Y+15\r\nButton B: X+16, Y+39\r\nPrize: X=10180, Y=10976\r\n\r\nButton A: X+68, Y+59\r\nButton B: X+87, Y+11\r\nPrize: X=5204, Y=1162\r\n\r\nButton A: X+14, Y+61\r\nButton B: X+77, Y+27\r\nPrize: X=13178, Y=1024\r\n\r\nButton A: X+40, Y+58\r\nButton B: X+70, Y+22\r\nPrize: X=6720, Y=6246\r\n\r\nButton A: X+15, Y+59\r\nButton B: X+50, Y+11\r\nPrize: X=9395, Y=8766\r\n\r\nButton A: X+57, Y+54\r\nButton B: X+16, Y+96\r\nPrize: X=5676, Y=12168\r\n\r\nButton A: X+12, Y+20\r\nButton B: X+35, Y+18\r\nPrize: X=12813, Y=7454\r\n\r\nButton A: X+53, Y+12\r\nButton B: X+22, Y+74\r\nPrize: X=11837, Y=9296\r\n\r\nButton A: X+47, Y+70\r\nButton B: X+45, Y+22\r\nPrize: X=3909, Y=14282\r\n\r\nButton A: X+37, Y+69\r\nButton B: X+40, Y+11\r\nPrize: X=12502, Y=13966\r\n\r\nButton A: X+26, Y+37\r\nButton B: X+73, Y+23\r\nPrize: X=3305, Y=1387\r\n\r\nButton A: X+27, Y+76\r\nButton B: X+53, Y+11\r\nPrize: X=7005, Y=2665\r\n\r\nButton A: X+31, Y+54\r\nButton B: X+30, Y+14\r\nPrize: X=1879, Y=1440\r\n\r\nButton A: X+15, Y+63\r\nButton B: X+47, Y+13\r\nPrize: X=8566, Y=16440\r\n\r\nButton A: X+86, Y+98\r\nButton B: X+17, Y+91\r\nPrize: X=4441, Y=10003\r\n\r\nButton A: X+60, Y+17\r\nButton B: X+20, Y+93\r\nPrize: X=4020, Y=4545\r\n\r\nButton A: X+20, Y+44\r\nButton B: X+57, Y+26\r\nPrize: X=4799, Y=11498\r\n\r\nButton A: X+98, Y+16\r\nButton B: X+61, Y+90\r\nPrize: X=10955, Y=4590\r\n\r\nButton A: X+56, Y+19\r\nButton B: X+30, Y+56\r\nPrize: X=4072, Y=1920\r\n\r\nButton A: X+78, Y+16\r\nButton B: X+65, Y+74\r\nPrize: X=13598, Y=8492\r\n\r\nButton A: X+37, Y+73\r\nButton B: X+47, Y+19\r\nPrize: X=19241, Y=8261\r\n\r\nButton A: X+23, Y+88\r\nButton B: X+61, Y+29\r\nPrize: X=3865, Y=5999\r\n\r\nButton A: X+19, Y+32\r\nButton B: X+39, Y+14\r\nPrize: X=19463, Y=9730\r\n\r\nButton A: X+59, Y+91\r\nButton B: X+98, Y+16\r\nPrize: X=8105, Y=5473\r\n\r\nButton A: X+29, Y+72\r\nButton B: X+85, Y+12\r\nPrize: X=2688, Y=2892\r\n\r\nButton A: X+96, Y+15\r\nButton B: X+73, Y+94\r\nPrize: X=5961, Y=3657\r\n\r\nButton A: X+69, Y+33\r\nButton B: X+22, Y+59\r\nPrize: X=2939, Y=4913\r\n\r\nButton A: X+25, Y+76\r\nButton B: X+52, Y+35\r\nPrize: X=1517, Y=2027\r\n\r\nButton A: X+21, Y+79\r\nButton B: X+39, Y+37\r\nPrize: X=3780, Y=4236\r\n\r\nButton A: X+61, Y+26\r\nButton B: X+26, Y+50\r\nPrize: X=13718, Y=1006\r\n\r\nButton A: X+15, Y+68\r\nButton B: X+54, Y+13\r\nPrize: X=11516, Y=929\r\n\r\nButton A: X+12, Y+53\r\nButton B: X+57, Y+13\r\nPrize: X=15221, Y=3619\r\n\r\nButton A: X+28, Y+87\r\nButton B: X+62, Y+11\r\nPrize: X=14488, Y=6875\r\n\r\nButton A: X+25, Y+51\r\nButton B: X+62, Y+40\r\nPrize: X=19006, Y=18316\r\n\r\nButton A: X+25, Y+48\r\nButton B: X+56, Y+16\r\nPrize: X=7960, Y=14320\r\n\r\nButton A: X+59, Y+27\r\nButton B: X+17, Y+81\r\nPrize: X=6190, Y=8910\r\n\r\nButton A: X+74, Y+37\r\nButton B: X+14, Y+37\r\nPrize: X=6106, Y=5513\r\n\r\nButton A: X+21, Y+48\r\nButton B: X+85, Y+37\r\nPrize: X=5476, Y=3394\r\n\r\nButton A: X+26, Y+54\r\nButton B: X+35, Y+16\r\nPrize: X=19108, Y=17854\r\n\r\nButton A: X+11, Y+35\r\nButton B: X+68, Y+23\r\nPrize: X=14263, Y=5248\r\n\r\nButton A: X+13, Y+45\r\nButton B: X+74, Y+33\r\nPrize: X=4542, Y=11216\r\n\r\nButton A: X+31, Y+61\r\nButton B: X+56, Y+18\r\nPrize: X=11857, Y=9149\r\n\r\nButton A: X+79, Y+36\r\nButton B: X+28, Y+52\r\nPrize: X=7392, Y=4428\r\n\r\nButton A: X+11, Y+47\r\nButton B: X+71, Y+22\r\nPrize: X=8530, Y=9300\r\n\r\nButton A: X+20, Y+67\r\nButton B: X+67, Y+14\r\nPrize: X=4434, Y=1806\r\n\r\nButton A: X+61, Y+21\r\nButton B: X+22, Y+66\r\nPrize: X=17782, Y=3038\r\n\r\nButton A: X+86, Y+36\r\nButton B: X+13, Y+60\r\nPrize: X=15025, Y=2504\r\n\r\nButton A: X+58, Y+22\r\nButton B: X+19, Y+57\r\nPrize: X=885, Y=17007\r\n\r\nButton A: X+45, Y+15\r\nButton B: X+29, Y+65\r\nPrize: X=15492, Y=13860\r\n\r\nButton A: X+61, Y+12\r\nButton B: X+38, Y+73\r\nPrize: X=7666, Y=7995\r\n\r\nButton A: X+42, Y+14\r\nButton B: X+12, Y+33\r\nPrize: X=17468, Y=13674\r\n\r\nButton A: X+12, Y+68\r\nButton B: X+91, Y+24\r\nPrize: X=5919, Y=5516\r\n\r\nButton A: X+32, Y+11\r\nButton B: X+30, Y+75\r\nPrize: X=12342, Y=7521\r\n\r\nButton A: X+40, Y+78\r\nButton B: X+82, Y+41\r\nPrize: X=5708, Y=7088\r\n\r\nButton A: X+31, Y+81\r\nButton B: X+48, Y+11\r\nPrize: X=10714, Y=9853\r\n\r\nButton A: X+74, Y+24\r\nButton B: X+12, Y+46\r\nPrize: X=16602, Y=16960\r\n\r\nButton A: X+36, Y+46\r\nButton B: X+31, Y+12\r\nPrize: X=2868, Y=13560\r\n\r\nButton A: X+43, Y+12\r\nButton B: X+83, Y+97\r\nPrize: X=3527, Y=2018\r\n\r\nButton A: X+42, Y+75\r\nButton B: X+73, Y+33\r\nPrize: X=5065, Y=3690\r\n\r\nButton A: X+48, Y+20\r\nButton B: X+50, Y+78\r\nPrize: X=5474, Y=10654\r\n\r\nButton A: X+83, Y+18\r\nButton B: X+50, Y+75\r\nPrize: X=8667, Y=2457\r\n\r\nButton A: X+77, Y+51\r\nButton B: X+27, Y+88\r\nPrize: X=4342, Y=7153\r\n\r\nButton A: X+82, Y+21\r\nButton B: X+31, Y+45\r\nPrize: X=8171, Y=5391\r\n\r\nButton A: X+19, Y+42\r\nButton B: X+35, Y+19\r\nPrize: X=5515, Y=3641\r\n\r\nButton A: X+20, Y+62\r\nButton B: X+45, Y+21\r\nPrize: X=2515, Y=17563\r\n\r\nButton A: X+98, Y+40\r\nButton B: X+67, Y+97\r\nPrize: X=12152, Y=11786\r\n\r\nButton A: X+61, Y+11\r\nButton B: X+37, Y+33\r\nPrize: X=1640, Y=638\r\n\r\nButton A: X+16, Y+43\r\nButton B: X+45, Y+19\r\nPrize: X=216, Y=15111\r\n\r\nButton A: X+23, Y+47\r\nButton B: X+95, Y+32\r\nPrize: X=10589, Y=6236\r\n\r\nButton A: X+20, Y+30\r\nButton B: X+39, Y+11\r\nPrize: X=10368, Y=1432\r\n\r\nButton A: X+63, Y+29\r\nButton B: X+14, Y+89\r\nPrize: X=1883, Y=1197\r\n\r\nButton A: X+54, Y+96\r\nButton B: X+65, Y+11\r\nPrize: X=5455, Y=3529\r\n\r\nButton A: X+51, Y+86\r\nButton B: X+79, Y+39\r\nPrize: X=10843, Y=9428\r\n\r\nButton A: X+24, Y+47\r\nButton B: X+46, Y+12\r\nPrize: X=4414, Y=4818\r\n\r\nButton A: X+77, Y+28\r\nButton B: X+14, Y+44\r\nPrize: X=7249, Y=1268\r\n\r\nButton A: X+47, Y+14\r\nButton B: X+13, Y+60\r\nPrize: X=8656, Y=17384\r\n\r\nButton A: X+32, Y+68\r\nButton B: X+52, Y+15\r\nPrize: X=9656, Y=18458\r\n\r\nButton A: X+72, Y+41\r\nButton B: X+14, Y+32\r\nPrize: X=3134, Y=15142\r\n\r\nButton A: X+40, Y+14\r\nButton B: X+16, Y+26\r\nPrize: X=11568, Y=4816\r\n\r\nButton A: X+18, Y+65\r\nButton B: X+75, Y+36\r\nPrize: X=3510, Y=5630\r\n\r\nButton A: X+85, Y+67\r\nButton B: X+17, Y+98\r\nPrize: X=9316, Y=13519\r\n\r\nButton A: X+65, Y+20\r\nButton B: X+12, Y+43\r\nPrize: X=11986, Y=16644\r\n\r\nButton A: X+12, Y+72\r\nButton B: X+48, Y+14\r\nPrize: X=6608, Y=11376\r\n\r\nButton A: X+54, Y+77\r\nButton B: X+37, Y+11\r\nPrize: X=19507, Y=18261\r\n\r\nButton A: X+18, Y+67\r\nButton B: X+90, Y+74\r\nPrize: X=3996, Y=3912\r\n\r\nButton A: X+34, Y+21\r\nButton B: X+21, Y+43\r\nPrize: X=14075, Y=3723\r\n\r\nButton A: X+14, Y+65\r\nButton B: X+74, Y+13\r\nPrize: X=17338, Y=2837\r\n\r\nButton A: X+31, Y+72\r\nButton B: X+57, Y+27\r\nPrize: X=5072, Y=3033\r\n\r\nButton A: X+22, Y+98\r\nButton B: X+86, Y+30\r\nPrize: X=4154, Y=10030\r\n\r\nButton A: X+15, Y+52\r\nButton B: X+31, Y+14\r\nPrize: X=17731, Y=7116\r\n\r\nButton A: X+17, Y+76\r\nButton B: X+40, Y+41\r\nPrize: X=3684, Y=9165\r\n\r\nButton A: X+19, Y+47\r\nButton B: X+68, Y+44\r\nPrize: X=8179, Y=10247\r\n\r\nButton A: X+68, Y+71\r\nButton B: X+23, Y+96\r\nPrize: X=6486, Y=7492\r\n\r\nButton A: X+80, Y+14\r\nButton B: X+17, Y+78\r\nPrize: X=10842, Y=1486\r\n\r\nButton A: X+66, Y+20\r\nButton B: X+12, Y+49\r\nPrize: X=11822, Y=15084\r\n\r\nButton A: X+20, Y+90\r\nButton B: X+69, Y+47\r\nPrize: X=1967, Y=2791\r\n\r\nButton A: X+29, Y+63\r\nButton B: X+46, Y+23\r\nPrize: X=17203, Y=9079\r\n\r\nButton A: X+44, Y+24\r\nButton B: X+38, Y+65\r\nPrize: X=8802, Y=13547\r\n\r\nButton A: X+66, Y+24\r\nButton B: X+55, Y+82\r\nPrize: X=7161, Y=7254\r\n\r\nButton A: X+55, Y+24\r\nButton B: X+35, Y+67\r\nPrize: X=11960, Y=4398\r\n\r\nButton A: X+33, Y+75\r\nButton B: X+40, Y+28\r\nPrize: X=1892, Y=3608\r\n\r\nButton A: X+74, Y+74\r\nButton B: X+88, Y+16\r\nPrize: X=10698, Y=7818\r\n\r\nButton A: X+90, Y+35\r\nButton B: X+51, Y+65\r\nPrize: X=909, Y=760\r\n\r\nButton A: X+58, Y+13\r\nButton B: X+20, Y+52\r\nPrize: X=11176, Y=16318\r\n\r\nButton A: X+79, Y+11\r\nButton B: X+41, Y+35\r\nPrize: X=1408, Y=694\r\n\r\nButton A: X+26, Y+46\r\nButton B: X+47, Y+24\r\nPrize: X=12497, Y=12794\r\n\r\nButton A: X+96, Y+27\r\nButton B: X+31, Y+59\r\nPrize: X=4543, Y=6155\r\n\r\nButton A: X+70, Y+15\r\nButton B: X+89, Y+88\r\nPrize: X=8413, Y=6421\r\n\r\nButton A: X+18, Y+31\r\nButton B: X+35, Y+20\r\nPrize: X=8735, Y=14745\r\n\r\nButton A: X+71, Y+20\r\nButton B: X+29, Y+55\r\nPrize: X=2145, Y=1775\r\n\r\nButton A: X+26, Y+12\r\nButton B: X+14, Y+55\r\nPrize: X=2196, Y=5382\r\n\r\nButton A: X+25, Y+45\r\nButton B: X+40, Y+15\r\nPrize: X=7515, Y=9935\r\n\r\nButton A: X+27, Y+54\r\nButton B: X+42, Y+15\r\nPrize: X=11150, Y=16496\r\n\r\nButton A: X+68, Y+17\r\nButton B: X+20, Y+57\r\nPrize: X=1840, Y=1668\r\n\r\nButton A: X+42, Y+30\r\nButton B: X+13, Y+34\r\nPrize: X=3467, Y=3638\r\n\r\nButton A: X+11, Y+33\r\nButton B: X+75, Y+56\r\nPrize: X=7861, Y=18390\r\n\r\nButton A: X+55, Y+18\r\nButton B: X+20, Y+69\r\nPrize: X=8875, Y=15635\r\n\r\nButton A: X+90, Y+11\r\nButton B: X+48, Y+76\r\nPrize: X=1590, Y=1597\r\n\r\nButton A: X+15, Y+61\r\nButton B: X+23, Y+18\r\nPrize: X=1575, Y=4139\r\n\r\nButton A: X+58, Y+26\r\nButton B: X+17, Y+60\r\nPrize: X=15071, Y=15772\r\n\r\nButton A: X+25, Y+79\r\nButton B: X+45, Y+11\r\nPrize: X=17395, Y=19605\r\n\r\nButton A: X+49, Y+25\r\nButton B: X+37, Y+83\r\nPrize: X=3302, Y=3416\r\n\r\nButton A: X+24, Y+58\r\nButton B: X+60, Y+24\r\nPrize: X=4988, Y=19092\r\n\r\nButton A: X+35, Y+64\r\nButton B: X+50, Y+24\r\nPrize: X=8655, Y=15368\r\n\r\nButton A: X+11, Y+31\r\nButton B: X+28, Y+18\r\nPrize: X=13745, Y=8255\r\n\r\nButton A: X+22, Y+69\r\nButton B: X+75, Y+36\r\nPrize: X=2377, Y=6459\r\n\r\nButton A: X+22, Y+44\r\nButton B: X+52, Y+21\r\nPrize: X=7338, Y=10264\r\n\r\nButton A: X+66, Y+20\r\nButton B: X+35, Y+53\r\nPrize: X=3159, Y=2865\r\n\r\nButton A: X+14, Y+25\r\nButton B: X+68, Y+22\r\nPrize: X=3934, Y=2153\r\n\r\nButton A: X+19, Y+68\r\nButton B: X+45, Y+13\r\nPrize: X=207, Y=9775\r\n\r\nButton A: X+13, Y+23\r\nButton B: X+30, Y+12\r\nPrize: X=12386, Y=15218\r\n\r\nButton A: X+16, Y+36\r\nButton B: X+63, Y+39\r\nPrize: X=17378, Y=17990\r\n\r\nButton A: X+80, Y+37\r\nButton B: X+18, Y+94\r\nPrize: X=4820, Y=9940\r\n\r\nButton A: X+59, Y+27\r\nButton B: X+18, Y+72\r\nPrize: X=3987, Y=6543\r\n\r\nButton A: X+32, Y+11\r\nButton B: X+23, Y+70\r\nPrize: X=13101, Y=2561\r\n\r\nButton A: X+79, Y+35\r\nButton B: X+39, Y+56\r\nPrize: X=1564, Y=1932\r\n\r\nButton A: X+17, Y+53\r\nButton B: X+65, Y+19\r\nPrize: X=10395, Y=10249\r\n\r\nButton A: X+72, Y+69\r\nButton B: X+19, Y+77\r\nPrize: X=5950, Y=10523\r\n\r\nButton A: X+41, Y+66\r\nButton B: X+50, Y+24\r\nPrize: X=12008, Y=8036\r\n\r\nButton A: X+26, Y+12\r\nButton B: X+20, Y+31\r\nPrize: X=16530, Y=16499\r\n\r\nButton A: X+16, Y+58\r\nButton B: X+79, Y+25\r\nPrize: X=7136, Y=2048\r\n\r\nButton A: X+35, Y+12\r\nButton B: X+15, Y+43\r\nPrize: X=2220, Y=2389\r\n\r\nButton A: X+79, Y+99\r\nButton B: X+87, Y+16\r\nPrize: X=8530, Y=5201\r\n\r\nButton A: X+11, Y+59\r\nButton B: X+61, Y+15\r\nPrize: X=17272, Y=3584\r\n\r\nButton A: X+55, Y+55\r\nButton B: X+97, Y+17\r\nPrize: X=9178, Y=4058\r\n\r\nButton A: X+43, Y+79\r\nButton B: X+43, Y+15\r\nPrize: X=18839, Y=9803\r\n\r\nButton A: X+12, Y+52\r\nButton B: X+54, Y+19\r\nPrize: X=6896, Y=10946\r\n\r\nButton A: X+34, Y+23\r\nButton B: X+12, Y+85\r\nPrize: X=2846, Y=7307\r\n\r\nButton A: X+76, Y+12\r\nButton B: X+17, Y+68\r\nPrize: X=4389, Y=19424\r\n\r\nButton A: X+54, Y+22\r\nButton B: X+17, Y+45\r\nPrize: X=5998, Y=9590\r\n\r\nButton A: X+14, Y+40\r\nButton B: X+74, Y+39\r\nPrize: X=8956, Y=18265\r\n\r\nButton A: X+30, Y+14\r\nButton B: X+18, Y+29\r\nPrize: X=2654, Y=1910\r\n\r\nButton A: X+14, Y+62\r\nButton B: X+26, Y+11\r\nPrize: X=852, Y=741\r\n\r\nButton A: X+29, Y+42\r\nButton B: X+36, Y+16\r\nPrize: X=9829, Y=4034\r\n\r\nButton A: X+21, Y+41\r\nButton B: X+59, Y+22\r\nPrize: X=16365, Y=7302\r\n\r\nButton A: X+32, Y+67\r\nButton B: X+42, Y+14\r\nPrize: X=12626, Y=14446\r\n\r\nButton A: X+41, Y+95\r\nButton B: X+70, Y+19\r\nPrize: X=8638, Y=10564\r\n\r\nButton A: X+90, Y+54\r\nButton B: X+16, Y+82\r\nPrize: X=3934, Y=5908\r\n\r\nButton A: X+43, Y+15\r\nButton B: X+21, Y+44\r\nPrize: X=770, Y=6421\r\n\r\nButton A: X+27, Y+50\r\nButton B: X+39, Y+20\r\nPrize: X=7856, Y=19660\r\n\r\nButton A: X+23, Y+38\r\nButton B: X+48, Y+20\r\nPrize: X=10557, Y=8594\r\n\r\nButton A: X+24, Y+63\r\nButton B: X+53, Y+13\r\nPrize: X=9756, Y=14425\r\n\r\nButton A: X+95, Y+91\r\nButton B: X+94, Y+16\r\nPrize: X=7152, Y=1816\r\n\r\nButton A: X+14, Y+33\r\nButton B: X+46, Y+33\r\nPrize: X=1112, Y=13652\r\n\r\nButton A: X+11, Y+35\r\nButton B: X+45, Y+32\r\nPrize: X=1903, Y=12341\r\n\r\nButton A: X+71, Y+34\r\nButton B: X+27, Y+64\r\nPrize: X=10484, Y=7598\r\n\r\nButton A: X+95, Y+16\r\nButton B: X+44, Y+77\r\nPrize: X=7555, Y=4056\r\n\r\nButton A: X+99, Y+24\r\nButton B: X+11, Y+96\r\nPrize: X=8206, Y=9456\r\n\r\nButton A: X+60, Y+23\r\nButton B: X+13, Y+48\r\nPrize: X=7341, Y=15254\r\n\r\nButton A: X+16, Y+58\r\nButton B: X+72, Y+35\r\nPrize: X=3976, Y=15515\r\n\r\nButton A: X+18, Y+51\r\nButton B: X+33, Y+19\r\nPrize: X=14096, Y=430\r\n\r\nButton A: X+26, Y+28\r\nButton B: X+75, Y+11\r\nPrize: X=3254, Y=574\r\n\r\nButton A: X+91, Y+13\r\nButton B: X+50, Y+61\r\nPrize: X=1014, Y=845\r\n\r\nButton A: X+71, Y+43\r\nButton B: X+19, Y+39\r\nPrize: X=2530, Y=17978\r\n\r\nButton A: X+90, Y+18\r\nButton B: X+69, Y+65\r\nPrize: X=3735, Y=1515\r\n\r\nButton A: X+42, Y+77\r\nButton B: X+41, Y+14\r\nPrize: X=12057, Y=4204\r\n\r\nButton A: X+39, Y+16\r\nButton B: X+12, Y+25\r\nPrize: X=15170, Y=17026\r\n\r\nButton A: X+19, Y+77\r\nButton B: X+30, Y+25\r\nPrize: X=2739, Y=7237\r\n\r\nButton A: X+17, Y+90\r\nButton B: X+29, Y+19\r\nPrize: X=3229, Y=9292\r\n\r\nButton A: X+23, Y+94\r\nButton B: X+57, Y+43\r\nPrize: X=4788, Y=7981\r\n\r\nButton A: X+56, Y+15\r\nButton B: X+15, Y+64\r\nPrize: X=2810, Y=9179\r\n\r\nButton A: X+76, Y+34\r\nButton B: X+23, Y+44\r\nPrize: X=8565, Y=6360\r\n\r\nButton A: X+48, Y+24\r\nButton B: X+53, Y+87\r\nPrize: X=7867, Y=9681\r\n\r\nButton A: X+21, Y+77\r\nButton B: X+50, Y+27\r\nPrize: X=6598, Y=9341\r\n\r\nButton A: X+57, Y+16\r\nButton B: X+30, Y+62\r\nPrize: X=7694, Y=17338\r\n\r\nButton A: X+59, Y+17\r\nButton B: X+14, Y+69\r\nPrize: X=8422, Y=12233\r\n\r\nButton A: X+47, Y+82\r\nButton B: X+29, Y+16\r\nPrize: X=4797, Y=5394\r\n\r\nButton A: X+27, Y+74\r\nButton B: X+49, Y+11\r\nPrize: X=17351, Y=4793\r\n\r\nButton A: X+35, Y+94\r\nButton B: X+99, Y+43\r\nPrize: X=9106, Y=9077\r\n\r\nButton A: X+31, Y+57\r\nButton B: X+45, Y+12\r\nPrize: X=7782, Y=2678\r\n\r\nButton A: X+98, Y+12\r\nButton B: X+69, Y+80\r\nPrize: X=10327, Y=2624\r\n\r\nButton A: X+12, Y+85\r\nButton B: X+81, Y+79\r\nPrize: X=1107, Y=2399\r\n\r\nButton A: X+12, Y+36\r\nButton B: X+65, Y+22\r\nPrize: X=14533, Y=18546\r\n\r\nButton A: X+53, Y+15\r\nButton B: X+21, Y+43\r\nPrize: X=10585, Y=11295\r\n\r\nButton A: X+51, Y+14\r\nButton B: X+18, Y+53\r\nPrize: X=1157, Y=6966\r\n\r\nButton A: X+31, Y+72\r\nButton B: X+47, Y+17\r\nPrize: X=15745, Y=1895\r\n\r\nButton A: X+41, Y+18\r\nButton B: X+27, Y+40\r\nPrize: X=9737, Y=3746\r\n\r\nButton A: X+53, Y+29\r\nButton B: X+22, Y+39\r\nPrize: X=897, Y=12099\r\n\r\nButton A: X+15, Y+38\r\nButton B: X+31, Y+15\r\nPrize: X=14340, Y=6942\r\n\r\nButton A: X+69, Y+25\r\nButton B: X+21, Y+67\r\nPrize: X=16073, Y=14645\r\n\r\nButton A: X+37, Y+15\r\nButton B: X+16, Y+84\r\nPrize: X=3122, Y=8862\r\n\r\nButton A: X+15, Y+27\r\nButton B: X+33, Y+14\r\nPrize: X=10865, Y=8184\r\n\r\nButton A: X+12, Y+58\r\nButton B: X+75, Y+30\r\nPrize: X=7895, Y=380\r\n\r\nButton A: X+99, Y+55\r\nButton B: X+16, Y+97\r\nPrize: X=6444, Y=10717\r\n\r\nButton A: X+57, Y+33\r\nButton B: X+30, Y+59\r\nPrize: X=4932, Y=6061\r\n\r\nButton A: X+20, Y+42\r\nButton B: X+31, Y+16\r\nPrize: X=12773, Y=13814\r\n\r\nButton A: X+36, Y+72\r\nButton B: X+49, Y+13\r\nPrize: X=9388, Y=10576\r\n\r\nButton A: X+50, Y+21\r\nButton B: X+13, Y+35\r\nPrize: X=6699, Y=13248\r\n\r\nButton A: X+30, Y+71\r\nButton B: X+73, Y+46\r\nPrize: X=6658, Y=6123\r\n\r\nButton A: X+14, Y+33\r\nButton B: X+43, Y+19\r\nPrize: X=8900, Y=1648\r\n\r\nButton A: X+71, Y+32\r\nButton B: X+12, Y+30\r\nPrize: X=11831, Y=500\r\n\r\nButton A: X+56, Y+29\r\nButton B: X+24, Y+48\r\nPrize: X=7792, Y=382\r\n\r\nButton A: X+12, Y+52\r\nButton B: X+47, Y+15\r\nPrize: X=14492, Y=6516\r\n\r\nButton A: X+45, Y+20\r\nButton B: X+35, Y+78\r\nPrize: X=3340, Y=1984\r\n\r\nButton A: X+48, Y+18\r\nButton B: X+33, Y+57\r\nPrize: X=1046, Y=6686\r\n\r\nButton A: X+29, Y+68\r\nButton B: X+61, Y+18\r\nPrize: X=8740, Y=15488\r\n\r\nButton A: X+23, Y+55\r\nButton B: X+64, Y+21\r\nPrize: X=15157, Y=18900\r\n\r\nButton A: X+13, Y+21\r\nButton B: X+96, Y+35\r\nPrize: X=2337, Y=1974\r\n\r\nButton A: X+19, Y+51\r\nButton B: X+55, Y+34\r\nPrize: X=4275, Y=4998\r\n\r\nButton A: X+65, Y+27\r\nButton B: X+24, Y+62\r\nPrize: X=1768, Y=3440\r\n\r\nButton A: X+19, Y+58\r\nButton B: X+39, Y+15\r\nPrize: X=19439, Y=5843\r\n\r\nButton A: X+65, Y+25\r\nButton B: X+14, Y+62\r\nPrize: X=12212, Y=18516\r\n\r\nButton A: X+46, Y+51\r\nButton B: X+79, Y+25\r\nPrize: X=11073, Y=6456\r\n\r\nButton A: X+87, Y+28\r\nButton B: X+33, Y+90\r\nPrize: X=2889, Y=7042\r\n\r\nButton A: X+92, Y+94\r\nButton B: X+14, Y+84\r\nPrize: X=2512, Y=9118\r\n\r\nButton A: X+49, Y+21\r\nButton B: X+27, Y+52\r\nPrize: X=2110, Y=3330\r\n\r\nButton A: X+16, Y+45\r\nButton B: X+71, Y+30\r\nPrize: X=14424, Y=3365\r\n\r\nButton A: X+77, Y+34\r\nButton B: X+18, Y+77\r\nPrize: X=1194, Y=1563\r\n\r\nButton A: X+27, Y+82\r\nButton B: X+76, Y+57\r\nPrize: X=2858, Y=5725\r\n\r\nButton A: X+50, Y+84\r\nButton B: X+73, Y+24\r\nPrize: X=9353, Y=9696\r\n\r\nButton A: X+99, Y+97\r\nButton B: X+12, Y+89\r\nPrize: X=6534, Y=14049\r\n\r\nButton A: X+22, Y+40\r\nButton B: X+48, Y+16\r\nPrize: X=15996, Y=6800\r\n\r\nButton A: X+19, Y+51\r\nButton B: X+46, Y+12\r\nPrize: X=11383, Y=10685\r\n\r\nButton A: X+18, Y+77\r\nButton B: X+76, Y+65\r\nPrize: X=5100, Y=8551\r\n\r\nButton A: X+83, Y+19\r\nButton B: X+14, Y+53\r\nPrize: X=3007, Y=2232\r\n\r\nButton A: X+34, Y+50\r\nButton B: X+37, Y+16\r\nPrize: X=4457, Y=3904\r\n\r\nButton A: X+80, Y+24\r\nButton B: X+15, Y+61\r\nPrize: X=5775, Y=10957\r\n\r\nButton A: X+20, Y+47\r\nButton B: X+27, Y+14\r\nPrize: X=5818, Y=3438\r\n\r\nButton A: X+14, Y+77\r\nButton B: X+86, Y+78\r\nPrize: X=2068, Y=3869\r\n\r\nButton A: X+57, Y+26\r\nButton B: X+57, Y+83\r\nPrize: X=3705, Y=3628\r\n\r\nButton A: X+54, Y+68\r\nButton B: X+98, Y+35\r\nPrize: X=3080, Y=2464\r\n\r\nButton A: X+19, Y+30\r\nButton B: X+66, Y+33\r\nPrize: X=8225, Y=5937\r\n\r\nButton A: X+14, Y+97\r\nButton B: X+83, Y+12\r\nPrize: X=1720, Y=2908\r\n\r\nButton A: X+75, Y+15\r\nButton B: X+58, Y+56\r\nPrize: X=8111, Y=2377\r\n\r\nButton A: X+49, Y+26\r\nButton B: X+25, Y+94\r\nPrize: X=3291, Y=6994\r\n\r\nButton A: X+11, Y+20\r\nButton B: X+52, Y+27\r\nPrize: X=5892, Y=1929\r\n\r\nButton A: X+16, Y+26\r\nButton B: X+33, Y+11\r\nPrize: X=11719, Y=13221\r\n\r\nButton A: X+38, Y+90\r\nButton B: X+87, Y+23\r\nPrize: X=3833, Y=1573\r\n\r\nButton A: X+74, Y+39\r\nButton B: X+23, Y+55\r\nPrize: X=12859, Y=14679\r\n\r\nButton A: X+39, Y+22\r\nButton B: X+27, Y+54\r\nPrize: X=11900, Y=19512\r\n\r\nButton A: X+23, Y+85\r\nButton B: X+94, Y+18\r\nPrize: X=9588, Y=9412\r\n\r\nButton A: X+69, Y+19\r\nButton B: X+46, Y+72\r\nPrize: X=3887, Y=2257\r\n\r\nButton A: X+17, Y+49\r\nButton B: X+40, Y+11\r\nPrize: X=3667, Y=1131\r\n\r\nButton A: X+21, Y+51\r\nButton B: X+75, Y+43\r\nPrize: X=15443, Y=16557\r\n\r\nButton A: X+49, Y+69\r\nButton B: X+69, Y+25\r\nPrize: X=9680, Y=6992\r\n\r\nButton A: X+54, Y+19\r\nButton B: X+16, Y+48\r\nPrize: X=17632, Y=13448\r\n\r\nButton A: X+61, Y+89\r\nButton B: X+50, Y+19\r\nPrize: X=8242, Y=7871\r\n\r\nButton A: X+22, Y+61\r\nButton B: X+45, Y+17\r\nPrize: X=15827, Y=9764\r\n\r\nButton A: X+74, Y+28\r\nButton B: X+46, Y+98\r\nPrize: X=3840, Y=4032\r\n\r\nButton A: X+68, Y+80\r\nButton B: X+70, Y+19\r\nPrize: X=6294, Y=4047\r\n\r\nButton A: X+48, Y+78\r\nButton B: X+50, Y+20\r\nPrize: X=10826, Y=9356\r\n\r\nButton A: X+66, Y+42\r\nButton B: X+33, Y+95\r\nPrize: X=6930, Y=9146\r\n\r\nButton A: X+24, Y+70\r\nButton B: X+74, Y+27\r\nPrize: X=5852, Y=6544\r\n\r\nButton A: X+80, Y+13\r\nButton B: X+16, Y+77\r\nPrize: X=9568, Y=13602\r\n\r\nButton A: X+12, Y+44\r\nButton B: X+41, Y+22\r\nPrize: X=16482, Y=12464\r\n\r\nButton A: X+11, Y+41\r\nButton B: X+49, Y+11\r\nPrize: X=8217, Y=13763\r\n\r\nButton A: X+76, Y+63\r\nButton B: X+99, Y+15\r\nPrize: X=5071, Y=3600\r\n\r\nButton A: X+91, Y+20\r\nButton B: X+52, Y+81\r\nPrize: X=2158, Y=2144\r\n\r\nButton A: X+80, Y+22\r\nButton B: X+22, Y+84\r\nPrize: X=4098, Y=8844\r\n\r\nButton A: X+89, Y+21\r\nButton B: X+32, Y+80\r\nPrize: X=2939, Y=3519\r\n\r\nButton A: X+30, Y+12\r\nButton B: X+11, Y+55\r\nPrize: X=6762, Y=15010\r\n\r\nButton A: X+14, Y+47\r\nButton B: X+72, Y+43\r\nPrize: X=5006, Y=11232\r\n\r\nButton A: X+42, Y+66\r\nButton B: X+50, Y+26\r\nPrize: X=17698, Y=10090\r\n\r\nButton A: X+79, Y+55\r\nButton B: X+20, Y+96\r\nPrize: X=791, Y=879\r\n\r\nButton A: X+11, Y+95\r\nButton B: X+60, Y+21\r\nPrize: X=4269, Y=10518\r\n\r\nButton A: X+56, Y+12\r\nButton B: X+25, Y+59\r\nPrize: X=19393, Y=1599\r\n\r\nButton A: X+99, Y+17\r\nButton B: X+33, Y+48\r\nPrize: X=4521, Y=1877\r\n\r\nButton A: X+61, Y+29\r\nButton B: X+24, Y+59\r\nPrize: X=19378, Y=477\r\n\r\nButton A: X+96, Y+44\r\nButton B: X+25, Y+37\r\nPrize: X=5079, Y=2711\r\n\r\nButton A: X+11, Y+40\r\nButton B: X+52, Y+27\r\nPrize: X=6779, Y=16570\r\n\r\nButton A: X+86, Y+17\r\nButton B: X+44, Y+50\r\nPrize: X=7944, Y=2892\r\n\r\nButton A: X+16, Y+27\r\nButton B: X+40, Y+21\r\nPrize: X=10664, Y=3236\r\n\r\nButton A: X+50, Y+18\r\nButton B: X+20, Y+46\r\nPrize: X=11990, Y=3492\r\n\r\nButton A: X+53, Y+68\r\nButton B: X+68, Y+14\r\nPrize: X=5914, Y=4072\r\n\r\nButton A: X+28, Y+65\r\nButton B: X+62, Y+14\r\nPrize: X=4298, Y=3611\r\n\r\nButton A: X+51, Y+35\r\nButton B: X+37, Y+88\r\nPrize: X=6014, Y=10075\r\n\r\nButton A: X+16, Y+71\r\nButton B: X+71, Y+19\r\nPrize: X=14853, Y=14617\r\n\r\nButton A: X+62, Y+14\r\nButton B: X+19, Y+50\r\nPrize: X=14808, Y=2010\r\n\r\nButton A: X+33, Y+57\r\nButton B: X+46, Y+23\r\nPrize: X=16508, Y=18158\r\n\r\nButton A: X+42, Y+12\r\nButton B: X+24, Y+37\r\nPrize: X=14540, Y=11794\r\n\r\nButton A: X+42, Y+32\r\nButton B: X+11, Y+86\r\nPrize: X=2533, Y=8838\r\n\r\nButton A: X+84, Y+56\r\nButton B: X+20, Y+99\r\nPrize: X=8192, Y=12486\r\n\r\nButton A: X+63, Y+24\r\nButton B: X+14, Y+64\r\nPrize: X=8460, Y=7888\r\n\r\nButton A: X+49, Y+19\r\nButton B: X+31, Y+53\r\nPrize: X=10270, Y=8234\r\n\r\nButton A: X+39, Y+74\r\nButton B: X+58, Y+35\r\nPrize: X=8299, Y=8692\r\n\r\nButton A: X+11, Y+40\r\nButton B: X+81, Y+45\r\nPrize: X=7632, Y=14725\r\n\r\nButton A: X+17, Y+56\r\nButton B: X+53, Y+27\r\nPrize: X=16842, Y=8808\r\n\r\nButton A: X+57, Y+57\r\nButton B: X+73, Y+12\r\nPrize: X=5236, Y=3528\r\n\r\nButton A: X+15, Y+97\r\nButton B: X+64, Y+20\r\nPrize: X=2942, Y=9966\r\n\r\nButton A: X+27, Y+11\r\nButton B: X+39, Y+66\r\nPrize: X=6905, Y=6931";

            string[] machines = puzzle.Split("\r\n\r\n");

            decimal totalTokens = 0;

            for (int machineIdx = 0; machineIdx < machines.Length; machineIdx++)
            {

                decimal[] buttonA = new decimal[2];
                decimal[] buttonB = new decimal[2];
                decimal[] prize = new decimal[2];

                string[] lines = machines[machineIdx].Split("\r\n");

                for (int i = 0; i < lines.Length; i++)
                {
                    if (i == 0)
                    {
                        decimal[] ints = new decimal[2];
                        string x = lines[i].Substring(lines[i].IndexOf("X") + 1, lines[i].IndexOf(",") - lines[i].IndexOf("X") - 1);
                        string y = lines[i].Substring(lines[i].IndexOf("Y") + 1, lines[i].Length - lines[i].IndexOf("Y") - 1);
                        ints[0] = decimal.Parse(x); ints[1] = decimal.Parse(y);
                        buttonA = ints;
                    }
                    else if (i == 1)
                    {
                        decimal[] ints = new decimal[2];
                        string x = lines[i].Substring(lines[i].IndexOf("X") + 1, lines[i].IndexOf(",") - lines[i].IndexOf("X") - 1);
                        string y = lines[i].Substring(lines[i].IndexOf("Y") + 1, lines[i].Length - lines[i].IndexOf("Y") - 1);
                        ints[0] = decimal.Parse(x); ints[1] = decimal.Parse(y);
                        buttonB = ints;
                    }
                    else
                    {
                        decimal[] ints = new decimal[2];
                        string x = lines[i].Substring(lines[i].IndexOf("X=") + 2, lines[i].IndexOf(",") - lines[i].IndexOf("X=") - 2);
                        string y = lines[i].Substring(lines[i].IndexOf("Y=") + 2, lines[i].Length - lines[i].IndexOf("Y=") - 2);
                        ints[0] = decimal.Parse(x) + 10000000000000; ints[1] = decimal.Parse(y) + 10000000000000;
                        prize = ints;
                    }
                }

                //0 = X, 1 = Y
                //Ecuaciones para encontrar los valores de X y Y
                //Aprendizaje, float y double al nosoportar decimales infinitos quitan los decimales, estrepeando la operacion
                decimal resultA = Math.Round(((prize[1] * buttonB[0]) - (prize[0] * buttonB[1])) / ((buttonA[1] * buttonB[0]) - (buttonA[0] * buttonB[1])), 2);
                decimal resultB = Math.Round((-buttonA[0] * resultA + prize[0]) / buttonB[0], 2);

                if (!resultA.ToString().Contains(",") && !resultB.ToString().Contains(",")
                    && resultA >= 0 && resultB >= 0)
                {
                    totalTokens += resultA * 3 + resultB;

                }

            }

            Console.WriteLine(totalTokens);
        }
    }
}
